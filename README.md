# Idol Survival: Sunny Debut üåü

**Idol Survival: Sunny Debut** l√† m·ªôt t·ª±a game sinh t·ªìn / m√¥ ph·ªèng qu·∫£n l√Ω th·∫ßn t∆∞·ª£ng tr√™n n·ªÅn t·∫£ng web v·ªõi ƒë·ªì h·ªça Pixel-art. Ng∆∞·ªùi ch∆°i s·∫Ω v√†o vai m·ªôt th·ª±c t·∫≠p sinh (Trainee), tr·∫£i qua 30 ng√†y t·∫≠p luy·ªán kh·∫Øc nghi·ªát, x√¢y d·ª±ng c√°c m·ªëi quan h·ªá v√† bi·ªÉu di·ªÖn tr√™n s√¢n kh·∫•u ƒë·ªÉ gi√†nh ƒë∆∞·ª£c su·∫•t "Debut" trong nh√≥m nh·∫°c cu·ªëi c√πng.

---

## üéÆ H∆Ø·ªöNG D·∫™N C√ÅCH CH∆†I (HOW TO PLAY)

M·ª•c ti√™u c·ªßa b·∫°n l√† s·ªëng s√≥t qua c√°c ƒë·ª£t lo·∫°i tr·ª´ (Elimination) v√†o ng√†y 7, 14, 21 v√† l·ªçt v√†o TOP 7 ƒë·ªÉ Debut v√†o ng√†y 30.

1. **T·∫°o nh√¢n v·∫≠t (Character Creation):**
   - T√πy ch·ªânh t√™n v√† ngo·∫°i h√¨nh (M√†u da, t√≥c, √°o).
   - Ph√¢n b·ªï 100 ƒëi·ªÉm kh·ªüi ƒë·∫ßu v√†o c√°c ch·ªâ s·ªë: Vocal, Dance, Rap, Visual, Charisma.

2. **K√Ω t√∫c x√° (Dorm / Hub):**
   - **Di chuy·ªÉn:** S·ª≠ d·ª•ng c√°c ph√≠m m≈©i t√™n `L√™n`, `Xu·ªëng`, `Tr√°i`, `Ph·∫£i`.
   - **T∆∞∆°ng t√°c NPC:** ƒêi l·∫°i g·∫ßn ch·∫°m v√†o c√°c NPC ƒë·ªÉ n√≥i chuy·ªán, ch·ªçn c√¢u tr·∫£ l·ªùi ƒë√∫ng ƒë·ªÉ tƒÉng ƒëi·ªÉm quan h·ªá (Relationship) v√† ƒëi·ªÉm l√†m vi·ªác nh√≥m (Teamwork).
   - **C√°c ph√≤ng ch·ª©c nƒÉng:** ƒêi v√†o c√°c khu v·ª±c m√†u s·∫Øc ƒë·ªÉ m·ªü menu.
     - `VOCAL`, `DANCE`, `RAP`, `GYM`: Nh·∫•n "PRACTICE" ƒë·ªÉ t·ªën 10 Stamina v√† ch∆°i Minigame tƒÉng ch·ªâ s·ªë.
     - `DORM`: Nh·∫•n "SLEEP" ƒë·ªÉ qua ng√†y v√† h·ªìi ph·ª•c to√†n b·ªô Stamina.

3. **T·∫≠p luy·ªán (Minigames):**
   - **Vocal:** Click chu·ªôt ƒë·ªÉ gi·ªØ chim bay qua c√°c khe ·ªëng (gi·ªëng Flappy Bird).
   - **Dance:** Ghi nh·ªõ th·ª© t·ª± n√∫t s√°ng v√† l·∫∑p l·∫°i b·∫±ng c√°c ph√≠m `D`, `F`, `J`, `K`.
   - **Rap:** G√µ l·∫°i c√°c t·ª´ xu·∫•t hi·ªán tr√™n m√†n h√¨nh v√†o √¥ input tr∆∞·ªõc khi h·∫øt gi·ªù.
   - **Gym:** Nh·∫•n ph√≠m `Space` ƒë√∫ng l√∫c thanh tr∆∞·ª£t ch·∫°y v√†o v√πng m√†u xanh.

4. **Ng√†y bi·ªÉu di·ªÖn (Stage Day):**
   - Di·ªÖn ra ƒë·ªãnh k·ª≥ v√†o c√°c ng√†y lo·∫°i tr·ª´.
   - T·∫£i l√™n m·ªôt file √¢m thanh (MP3) t·ª´ m√°y t√≠nh c·ªßa b·∫°n.
   - Ch·ªçn Concept (Vocal/Dance/Rap) v√† ƒê·ªô kh√≥ (Easy/Med/Hard).
   - Ch∆°i game nh·ªãp ƒëi·ªáu (Rhythm Game) b·∫±ng c√°c ph√≠m `D`, `F`, `J`, `K` r∆°i theo nh·ªãp ƒë·ªô b√†i h√°t. Nh·∫•n gi·ªØ ƒë·ªëi v·ªõi c√°c Note d√†i (Hold Notes).

5. **X·∫øp h·∫°ng & B·ªã lo·∫°i:**
   - ƒêi·ªÉm b√¨nh ch·ªçn (Votes) ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n ch·ªâ s·ªë c·ªßa b·∫°n, s·ªë l∆∞·ª£ng Fans thu th·∫≠p ƒë∆∞·ª£c, v√† ƒëi·ªÉm quan h·ªá v·ªõi NPC.
   - Tr√°nh vi·ªác t·ª•t xu·ªëng nh√≥m cu·ªëi b·∫£ng ƒë·ªÉ kh√¥ng b·ªã lo·∫°i!

---

## üìÅ C·∫§U TR√öC TH∆Ø M·ª§C V√Ä CHI TI·∫æT C√ÅC FILE

D·ª± √°n ƒë∆∞·ª£c chia nh·ªè th√†nh c√°c module ƒë·ªÉ d·ªÖ d√†ng qu·∫£n l√Ω v√† b·∫£o tr√¨.

### 1. `index.html`
- **Nhi·ªám v·ª•:** L√† b·ªô khung giao di·ªán c·ªßa to√†n b·ªô game.
- **Chi ti·∫øt:** Ch·ª©a c√°c th·∫ª `div` ph√¢n chia c√°c m√†n h√¨nh (screens) nh∆∞: Title Screen, Create Screen, Hub Screen, Stage Screen, Result Screen, v.v. N√≥ c≈©ng import file CSS v√† t·∫•t c·∫£ c√°c file JS c·∫ßn thi·∫øt.

### 2. `style.css`
- **Nhi·ªám v·ª•:** Quy ƒë·ªãnh giao di·ªán, m√†u s·∫Øc, b·ªë c·ª•c v√† hi·ªáu ·ª©ng.
- **Chi ti·∫øt:** S·ª≠ d·ª•ng CSS Variables (`:root`) ƒë·ªÉ ƒë·ªìng b·ªô m√†u s·∫Øc. ƒê·ªãnh d·∫°ng phong c√°ch Pixel-art, x·ª≠ l√Ω c√°c hi·ªáu ·ª©ng hover n√∫t b·∫•m, layout d·∫°ng l∆∞·ªõi (Grid) cho danh s√°ch NPC, v√† c√°c hi·ªáu ·ª©ng tr∆∞·ª£t/hi·ªÉn th·ªã th√¥ng b√°o (Toast).

### 3. `js/config.js`
- **Nhi·ªám v·ª•:** Ch·ª©a c√°c bi·∫øn c·∫•u h√¨nh to√†n c·ª•c v√† c√°c h√†m ti·ªán √≠ch d√πng chung.
- **Bi·∫øn / H√†m ch√≠nh:**
  - `C`, `App`, `Player`, `NPCs`, `DECOR`: Khai b√°o c√°c object l∆∞u tr·ªØ d·ªØ li·ªáu tr·∫°ng th√°i hi·ªán t·∫°i c·ªßa game.
  - `formatNum(n)`: R√∫t g·ªçn s·ªë l·ªõn (VD: 1000 -> 1k, 1000000 -> 1M).
  - `r(m)`: H√†m t·∫°o s·ªë ng·∫´u nhi√™n ti·ªán l·ª£i.
  - `Notify.show(msg)`: H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng b√°o g√≥c tr√™n m√†n h√¨nh t·ª± ƒë·ªông bi·∫øn m·∫•t sau v√†i gi√¢y.
  - `showScreen(id)`: H√†m x·ª≠ l√Ω vi·ªác ·∫©n/hi·ªán c√°c m√†n h√¨nh giao di·ªán kh√°c nhau.
  - `updateUI()`: C·∫≠p nh·∫≠t c√°c ch·ªâ s·ªë (Stats, Fan, Day...) l√™n b·∫£ng HUD c·ªßa ng∆∞·ªùi ch∆°i.

### 4. `js/data.js`
- **Nhi·ªám v·ª•:** L∆∞u tr·ªØ c√°c d·ªØ li·ªáu tƒ©nh (Static Data).
- **Bi·∫øn / H√†m ch√≠nh:**
  - `ROOMS`: T·ªça ƒë·ªô v√† m√†u s·∫Øc c√°c cƒÉn ph√≤ng trong k√Ω t√∫c x√°.
  - `PALETTES`: B·∫£ng m√†u da, t√≥c, qu·∫ßn √°o cho ch·ª©c nƒÉng t·∫°o nh√¢n v·∫≠t.
  - `DECOR_TYPES`: Danh s√°ch c√°c lo·∫°i v·∫≠t th·ªÉ trang tr√≠ (C√¢y, Ch·∫≠u hoa, C·ªôt ƒë√®n...).
  - `DIALOGUE_LIB`: Th∆∞ vi·ªán c√°c c√¢u h·ªôi tho·∫°i v√† l·ª±a ch·ªçn tr·∫£ l·ªùi khi t∆∞∆°ng t√°c v·ªõi NPC.
  - `RelManager`: Kh·ªüi t·∫°o fallback cho h·ªá th·ªëng qu·∫£n l√Ω ƒëi·ªÉm Quan h·ªá (Relationship).

### 5. `js/audio.js`
- **Nhi·ªám v·ª•:** H·ªá th·ªëng √¢m thanh, t·∫°o nh·∫°c n·ªÅn 8-bit b·∫±ng Web Audio API.
- **Bi·∫øn / H√†m ch√≠nh (`BGM` Object):**
  - `BGM.toggle()`: B·∫≠t / T·∫Øt nh·∫°c n·ªÅn.
  - `BGM.play(type)`: T·∫°o dao ƒë·ªông s√≥ng √¢m (Oscillator) ƒë·ªÉ ph√°t ƒëo·∫°n nh·∫°c `hub` (nh·∫π nh√†ng) ho·∫∑c `minigame` (d·ªìn d·∫≠p) m√† kh√¥ng c·∫ßn file mp3 b√™n ngo√†i.
  - `BGM.stop()`: D·ª´ng ph√°t nh·∫°c.

### 6. `js/map.js`
- **Nhi·ªám v·ª•:** ƒêi·ªÅu khi·ªÉn b·∫£n ƒë·ªì di chuy·ªÉn 2D (Hub/Dorm).
- **Bi·∫øn / H√†m ch√≠nh (`HubMap` Object):**
  - `start()`, `stop()`: Kh·ªüi ƒë·ªông ho·∫∑c d·ª´ng v√≤ng l·∫∑p c·ªßa b·∫£n ƒë·ªì.
  - `loop()`: V√≤ng l·∫∑p ch√≠nh (requestAnimationFrame), x·ª≠ l√Ω logic di chuy·ªÉn b·∫±ng ph√≠m m≈©i t√™n, gi·ªõi h·∫°n camera, t√≠nh to√°n va ch·∫°m v·ªõi c·ª≠a ph√≤ng v√† NPC.
  - `drawSprite(ctx, x, y, char)`: Render v·∫Ω nh√¢n v·∫≠t pixel (Player & NPC) l√™n canvas.
  - `drawDecor(ctx)`: Render b√≥ng ƒë·ªï v√† c√°c chi ti·∫øt trang tr√≠ (C√¢y, ƒë√®n, b·ª•i c·ªè).
  - `triggerRoom(room)`, `cancelRoom()`: X·ª≠ l√Ω hi·ªÉn th·ªã popup khi nh√¢n v·∫≠t ƒë·ª©ng trong khu v·ª±c ph√≤ng ch·ª©c nƒÉng.

### 7. `js/minigame.js`
- **Nhi·ªám v·ª•:** Ch·ª©a logic v√† giao di·ªán c·ªßa 4 b√†i t·∫≠p luy·ªán.
- **Bi·∫øn / H√†m ch√≠nh (`Minigame` Object):**
  - `getDifficulty(statType)`: T√≠nh to√°n ƒë·ªô kh√≥ linh ho·∫°t d·ª±a tr√™n ch·ªâ s·ªë hi·ªán t·∫°i c·ªßa ng∆∞·ªùi ch∆°i.
  - `start(type)`, `finish(win, gain)`, `exit()`, `retry()`: Qu·∫£n l√Ω v√≤ng ƒë·ªùi m·ªü/ƒë√≥ng/th·∫Øng/thua c·ªßa minigame.
  - `vocal(c, params)`: Logic game Flappy bird.
  - `dance(c, params)`: Logic game tr√≠ nh·ªõ nh·∫•p nh√°y ƒë√®n.
  - `rap(c, params)`: Logic game g√µ ph√≠m theo t·ª´ v·ª±ng.
  - `gym(c, params)`: Logic game canh thanh tr∆∞·ª£t (slider).

### 8. `js/stage.js`
- **Nhi·ªám v·ª•:** Qu·∫£n l√Ω ph·∫ßn ch∆°i quan tr·ªçng nh·∫•t: Rhythm Game (Game nh·ªãp ƒëi·ªáu) v√† hi·ªáu ·ª©ng k·∫øt th√∫c.
- **Bi·∫øn / H√†m ch√≠nh (`Stage` Object):**
  - `realInit()`: Kh·ªüi t·∫°o Web Audio API ƒë·ªÉ ph√¢n t√≠ch t·∫ßn s·ªë b√†i h√°t MP3 do ng∆∞·ªùi d√πng t·∫£i l√™n, g√°n t·ªëc ƒë·ªô v√† t·ª∑ l·ªá xu·∫•t hi·ªán Note.
  - `loop()`: V√≤ng l·∫∑p ph√¢n t√≠ch √¢m thanh, sinh ra Tap Note v√† Hold Note, v·∫Ω Note r∆°i xu·ªëng.
  - `handleInput(idx)`, `handleRelease(idx)`: X·ª≠ l√Ω khi ng∆∞·ªùi d√πng nh·∫•n/nh·∫£ c√°c ph√≠m `D, F, J, K`.
  - `evaluateHit(y, target)`, `triggerHit(type)`: T√≠nh to√°n sai s·ªë ƒë·ªÉ cho ƒëi·ªÉm PERFECT, GOOD, BAD, MISS v√† t√≠nh combo.
  - `endSong(winStatus)`: T√≠nh t·ªïng ƒëi·ªÉm l√Ω thuy·∫øt (Accuracy), c·ªông ƒëi·ªÉm Bonus d·ª±a tr√™n ch·ªâ s·ªë v√† hi·ªÉn th·ªã b·∫£ng ƒëi·ªÉm chi ti·∫øt.
  - `Fireworks` Object: V·∫Ω canvas hi·ªáu ·ª©ng ph√°o hoa ƒÉn m·ª´ng khi ng∆∞·ªùi ch∆°i chi·∫øn th·∫Øng (L·ªçt top Debut).

### 9. `js/game.js`
- **Nhi·ªám v·ª•:** Controller trung t√¢m, k·∫øt n·ªëi c√°c module l·∫°i v·ªõi nhau, qu·∫£n l√Ω lu·ªìng th·ªùi gian v√† tr·∫°ng th√°i game.
- **Bi·∫øn / H√†m ch√≠nh:**
  - `initGame()`, `generateDecor()`, `generateNPCs()`: Kh·ªüi t·∫°o d·ªØ li·ªáu ng·∫´u nhi√™n khi m·ªõi load trang.
  - `Game.startCreation()`, `Game.finishCreation()`: X·ª≠ l√Ω logic c·ªông tr·ª´ ƒëi·ªÉm l√∫c t·∫°o nh√¢n v·∫≠t.
  - `Game.enterHub()`, `Game.checkStageDay()`, `Game.nextDay()`: Chuy·ªÉn ng√†y v√† ki·ªÉm tra xem c√≥ ƒë·∫øn ng√†y s·ª± ki·ªán (Elimination) hay kh√¥ng.
  - `Game.handleSongUpload()`, `Game.triggerTeamSelection()`, `Game.selectDiff()`: X·ª≠ l√Ω logic ·ªü m√†n h√¨nh ph√≤ng ƒë·ª£i bi·ªÉu di·ªÖn.
  - `Game.finishStageDay()`, `Game.simDay()`: T√≠nh to√°n l·∫°i ƒëi·ªÉm s·ªë Vote, Buff/Nerf t·ª± ƒë·ªông cho NPC v√† ng∆∞·ªùi ch∆°i sau m·ªói ng√†y.
  - `Game.renderRank()`: V·∫Ω b·∫£ng x·∫øp h·∫°ng, b√¥i ƒë·ªè ng∆∞·ªùi b·ªã lo·∫°i, b√¥i v√†ng ng∆∞·ªùi ƒë∆∞·ª£c Debut.
  - `Game.triggerInteraction()`: Hi·ªán khung h·ªôi tho·∫°i khi ƒë·ª•ng v√†o NPC, tr·ª´/c·ªông fan v√† quan h·ªá d·ª±a tr√™n l·ª±a ch·ªçn.
  - `Game.showGameOver()`, `Game.showWin()`: G·ªçi m√†n h√¨nh t∆∞∆°ng ·ª©ng d·ª±a tr√™n k·∫øt qu·∫£ s·ªëng s√≥t c·ªßa ng∆∞·ªùi ch∆°i.
  - `Game.toggleSettings()`, `Game.quitToTitle()`: Qu·∫£n l√Ω n√∫t Pause game v√† reset ti·∫øn tr√¨nh ch∆°i.