button { pointer-events: auto; }
:root {
    --primary: #ff6b81; --secondary: #1e90ff; --accent: #feca57;
    --bg-sky: #48dbfb; --grass: #55efc4; 
    --panel: #ffffff; --text: #2f3542;
    --wood: #e67e22; --wall: #f1c40f;
    --perfect: #00b894; --good: #0984e3; --bad: #fdcb6e; --miss: #d63031;
    --game-ratio: 16 / 9;
}
.nav-arrow {
    display: none;
}
* { box-sizing: border-box; }
body {
    font-family: 'Press Start 2P', cursive;
    background-color: #000; 
    background-image: none; 
    margin: 0; 
    padding: 0;
    overflow: hidden; 
    width: 100vw;
    height: 100vh;
    user-select: none;
    touch-action: none; 
}

#game-container {
    width: 100%;
    height: 100%;
    
    max-width: none;
    max-height: none;
    
    background: var(--panel);
    border: none;
    border-radius: 0;
    
    position: absolute; 
    top: 0;
    left: 0;
    
    display: flex;
    flex-direction: column;
    box-shadow: none;
}

.screen {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--panel); display: none;
    flex-direction: column; align-items: center; justify-content: center;
    z-index: 10;
}

.screen.active { display: flex; }
h1, h2 { color: var(--primary); text-shadow: 2px 2px 0 #ffeaa7; text-align: center; margin-bottom: 15px; line-height: 1.5; font-size: 18px; }
button {
    background: #fff; border: 3px solid #2f3542; padding: 10px 12px;
    color: #2f3542; font-family: 'Press Start 2P', cursive; font-size: 10px;
    cursor: pointer; margin: 5px; box-shadow: 4px 4px 0 #2f3542;
    transition: transform 0.1s; border-radius: 4px;
}
button:hover { transform: translate(-2px, -2px); background: var(--accent); color: #fff; }
button:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0 #2f3542; }

/* TITLE SCREEN */
#title-screen {
    background-color: var(--bg-sky);
    background-image: repeating-linear-gradient(45deg, #48dbfb 25%, #4bcffa 25%, #4bcffa 50%, #48dbfb 50%, #48dbfb 75%, #4bcffa 75%, #4bcffa 100%);
    background-size: 20px 20px;
}
.title-logo {
    font-size: 40px; color: #fff; text-shadow: 4px 4px 0 var(--primary), 8px 8px 0 #000;
    margin-bottom: 50px; text-align: center; line-height: 1.5;
}

/* CREATION SCREEN */
#create-box {
    background: #fff; 
    border: 4px solid #2f3542; 
    padding: 15px;
    border-radius: 10px; 
    display: flex; 
    flex-direction: column; 
    align-items: center;
    width: 95%; 
    max-width: 800px; /* Tăng chiều rộng để dàn hàng ngang */
    max-height: 95vh; 
    overflow-y: auto;
}

/* Dàn hàng ngang cho PC và Mobile Landscape */
.creation-cols { 
    display: flex; 
    gap: 15px; 
    width: 100%; 
    justify-content: center; 
    flex-wrap: nowrap; /* Ưu tiên nằm ngang */
}
.creation-left { flex: 1.2; }
.creation-right { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    background: #f8f9fa;
    padding: 10px;
    border-radius: 8px;
}
#stats-inputs { display: flex; flex-direction: column; gap: 8px; width: 100%; margin: 10px 0; }
.stat-row {
    display: flex; justify-content: space-between; align-items: center;
    background: #f1f2f6; padding: 5px 10px; border: 2px solid #dfe4ea; border-radius: 4px;
    font-size: 10px; height: 40px;
}
.stat-controls {
    display: flex; align-items: center; gap: 8px; min-width: 80px; justify-content: flex-end;
}
.stat-controls button {
    width: 24px; height: 24px; padding: 0; display: flex; justify-content: center; align-items: center; flex-shrink: 0; margin: 0;
}
.stat-val { min-width: 25px; text-align: center; font-weight: bold; }
                        
/* Character Preview */
#char-preview { 
    width: 140px; 
    height: 140px; 
    border: 3px solid #2f3542; 
    background: #fff; 
    margin-bottom: 8px; 
    image-rendering: pixelated; 
}
.color-picker-row { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; justify-content: center; }
.color-btn { width: 20px; height: 20px; border: 2px solid #fff; box-shadow: 2px 2px 0 #000; cursor: pointer; }
.color-btn:hover { transform: scale(1.1); }
.color-label { font-size: 8px; margin-bottom: 5px; color: #555; }

/* MAP UI */
#hub-ui-overlay { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
#hub-stats-display {
    position: absolute; top: 20px; right: 20px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px 20px;
    border: 4px solid #2f3542; 
    border-radius: 12px;
    font-size: 14px;
    text-align: right; 
    pointer-events: auto;
    line-height: 1.8;
    box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
    min-width: 180px;
}

#room-notification, #interaction-modal {
    position: absolute; left: 50%; transform: translateX(-50%);
    background: #fff; border: 4px solid #2f3542; padding: 15px;
    text-align: center; pointer-events: auto; z-index: 20;
    box-shadow: 6px 6px 0 rgba(0,0,0,0.2); border-radius: 8px;
}

#room-notification { top: 40%; width: 300px; }

#interaction-modal {
    /* Vị trí cố định */
    position: fixed;
    bottom: 5%; /* Nhích lên cao một chút cho dễ nhìn */
    left: 50%;
    transform: translateX(-50%);
    
    /* Kích thước TO và CAO hơn */
    width: 92%;
    max-width: 650px;
    min-height: 120px; /* Ép chiều cao tối thiểu lớn hẳn */
    
    /* Giao diện */
    background: #fff;
    border: 6px solid #2f3542; /* Viền dày chuẩn Pixel */
    border-radius: 4px; /* Bo góc ít thôi cho nó vuông vức */
    padding: 30px; /* Đệm thoáng bên trong */
    box-shadow: 0 10px 0 rgba(0,0,0,0.5); /* Bóng đổ khối mạnh mẽ */
    
    /* Bố cục */
    display: none;
    flex-direction: column;
    z-index: 20000;
}

/* Tên NPC */
#dialogue-npc-name {
    color: #ff4757;
    /* SỬ DỤNG FONT PIXEL */
    font-family: 'Press Start 2P', cursive;
    font-size: 20px !important; /* Cỡ chữ vừa phải với font này */
    line-height: 1.5;
    margin-bottom: 25px;
    text-shadow: 2px 2px 0 #2f3542;
    text-transform: uppercase;
}

/* Nội dung hội thoại */
#dialogue-text {
    color: #2f3542;
    /* SỬ DỤNG FONT PIXEL */
    font-family: 'Press Start 2P', cursive;
    font-size: 14px !important; /* Font pixel này khá to nên 14px là dễ đọc */
    line-height: 1.8 !important; /* Giãn dòng rộng ra */
    margin-bottom: 40px !important; /* Đẩy các nút bấm ra xa */
    flex-grow: 1; /* Chiếm khoảng trống */
}

/* Container chứa nút */
#dialogue-options {
    display: flex;
    flex-direction: column;
    gap: 15px; /* Khoảng cách giữa các nút */
}

/* Nút lựa chọn */
.dialogue-btn {
    background: #f1f2f6;
    border: 4px solid #2f3542;
    border-radius: 4px;
    padding: 15px 10px; /* Nút cao, dễ bấm */
    
    /* Font chữ nút */
    font-family: 'Press Start 2P', cursive;
    font-size: 12px; /* Cỡ chữ nút nhỏ hơn một chút */
    color: #2f3542;
    text-align: center;
    text-transform: uppercase; /* Nút nên viết hoa hết */
    
    box-shadow: 0 6px 0 #bdc3c7; /* Bóng nút */
    transition: all 0.1s;
    cursor: pointer;
}

/* Hiệu ứng bấm nút */
.dialogue-btn:active {
    transform: translateY(6px); /* Nút lún xuống thật */
    box-shadow: none;
    background: #ffeaa7;
    border-color: #e67e22;
}

#team-reveal-list {
    flex-grow: 1;
    overflow-y: auto; /* Cho phép cuộn nếu bảng dài */
    min-height: 200px;
}

/* TEAM SELECT */
#team-select-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.95); 
    display: none; flex-direction: column; align-items: center; justify-content: center;
    z-index: 50; pointer-events: auto;
}
.team-slot {
    width: 140px; height: 180px; border: 3px dashed #ccc; margin: 10px;
    display: inline-flex; flex-direction: column; align-items: center; justify-content: center;
    background: #fff; transition: all 0.3s; border-radius: 10px;
    box-shadow: 5px 5px 0 #eee;
}
.team-slot.filled { border: 3px solid var(--primary); transform: scale(1.05); }

/* MINIGAME */
#minigame-screen { background: #2d3436; }
#minigame-canvas-container {
    width: 80% !important;
    height: 80vh !important; 
    max-width: 800px;
    max-height: 500px;
    margin: 0 auto;
    position: relative;
    border: 4px solid #fff;
    background: #000;
}

#minigame-result-overlay {
    position: absolute; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.9); display: none;
    flex-direction: column; align-items: center; justify-content: center; color: #fff; z-index: 30;
}
        
/* Dance Game Styles Updated */
.dance-game-container {
    display: flex; flex-direction: column; justify-content: space-between; height: 100%; width: 100%; padding: 40px 0;
}
.dance-btn {
    width: 70px; height: 70px; margin: 0 10px; border: 4px solid #fff;
    background: #333; color: #fff; font-size: 24px;
    display: inline-flex; justify-content: center; align-items: center;
    font-family: 'Press Start 2P', cursive; cursor: pointer;
    text-shadow: 2px 2px 0 #000;
    border-radius: 10px;
    box-shadow: 0 5px 0 #000;
}
.dance-btn.active {
    border-color: #fff; background: #00b894;
    transform: translateY(4px); box-shadow: 0 1px 0 #000;
}
.dance-btn#db-0 { background: #ff7675; } 
.dance-btn#db-1 { background: #74b9ff; } 
.dance-btn#db-2 { background: #ffeaa7; color:#333; }
.dance-btn#db-3 { background: #a29bfe; } 

/* Rap Game Styles */
#rap-game-ui { text-align: center; width: 100%; color: #fff; display: flex; flex-direction: column; align-items: center; }
#rap-timer-bar { width: 300px; height: 20px; background: #555; margin: 20px auto; border: 2px solid #fff; border-radius: 10px; overflow: hidden; }
#rap-timer-fill { height: 100%; width: 100%; background: #ff4757; transition: width 0.1s linear; }

/* STAGE */
.concept-btn { width: 60px; font-size: 8px; background: #fff; border: 2px solid #555; }
.concept-btn.selected { background: var(--accent); color: #fff; border-color: var(--primary); transform: scale(1.1); }  
#stage-ui { display: flex; width: 100%; height: 100%; background: #2c2c54; justify-content: center; } 
.side-panel { width: 180px; background: #f1f2f6; border-right: 4px solid #2f3542; color: #2f3542; padding: 10px; display: flex; flex-direction: column; }
#main-stage { width: 500px; background: #191936; position: relative; border-left: 4px solid #2f3542; border-right: 4px solid #2f3542; } 

canvas {
    display: block;
    width: 100%;
    height: 100%;
}
        
#score-hud { position: absolute; top: 20px; width: 100%; text-align: center; color: #fff; font-size: 20px; text-shadow: 2px 2px 0 var(--primary); pointer-events: none; }
#combo-hud { position: absolute; top: 50px; width: 100%; text-align: center; color: var(--accent); font-size: 14px; pointer-events: none; }

/* RESULTS */
#result-screen .result-box {
    background: #74b9ff; padding: 20px; border: 4px solid #2f3542; border-radius: 15px;
    width: 90%; height: 70vh; overflow-y: auto;
}
#ranking-list {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;
}


#ranking-list .rank-card > div:first-child {
    font-size: 18px !important;    
    font-weight: bold !important;  
    color: #2f3542 !important;     
    margin-bottom: 4px !important;       
    text-shadow: 1px 1px 0px #fff; 
    line-height: 1 !important;           
    
    text-align: center !important;
    width: 100% !important;         /* Ép khung rộng ra hết cỡ thì mới căn giữa được */
    display: block !important;      /* Đảm bảo nó là dạng khối để nhận width 100% */
}

.rank-card {
    background: #fff;
    border: 3px solid #2f3542;
    border-radius: 8px;
    text-align: center;
    position: relative; 
    box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
    height: 180px;
    width:135px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.rank-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
}
.rank-card.player { background: #ffeaa7; border-color: var(--primary); border-width: 3px; }
.rank-card.eliminated { background: #b2bec3; opacity: 0.7; filter: grayscale(100%); }
        
#npc-list-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr) !important;
    gap: 12px;
    overflow-y: auto;
    flex-grow: 1;
    padding: 10px;
}
#bgm-toggle { position: absolute; top: 10px; left: 10px; z-index: 100; font-size: 8px; padding: 5px; }

.stats-overlay {
    position: absolute;
    bottom: -100%;
    left: 0;
    width: 100%;
    height: auto;
    background: rgba(47, 53, 66, 0.95);
    color: #fff;
    padding: 10px 5px;
    transition: bottom 0.3s ease-in-out;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5px;
    font-size: 8px;
}
.rank-card:hover .stats-overlay { bottom: 0; }
        
/* Overlays */
#stage-detail-overlay, #stage-fail-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95); display: none;
    flex-direction: column; align-items: center; justify-content: center;
    z-index: 60; pointer-events: auto;
}
        
.score-box {
    background: #fff; border: 4px solid #2f3542; padding: 20px; border-radius: 15px;
    width: 400px; text-align: left; color: #2f3542;
    box-shadow: 10px 10px 0 var(--accent);
}
.score-line { display: flex; justify-content: space-between; margin: 10px 0; border-bottom: 2px dotted #ccc; padding-bottom: 5px; }
.total-line { font-size: 20px; color: var(--primary); font-weight: bold; text-align: center; margin-top: 20px; border: none; }

/* relationship */
#rel-list-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
    overflow-y: auto;
    flex-grow: 1;
    padding: 10px;
    width: 100%;
}
.rel-card {
    background: #fff;
    border: 3px solid #ff9ff3;
    border-radius: 10px;
    padding: 5px;
    text-align: center;
    height: 140px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
}
.rel-score {
    font-size: 14px;
    font-weight: bold;
    color: #ff4757;
    margin: 5px 0;
}
.rel-status {
    font-size: 8px;
    background: #2f3542;
    color: #fff;
    padding: 3px 6px;
    border-radius: 4px;
}

/* win screen - PYRAMID STYLES */
#pyramid-container {
    display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 30px;
}
.py-row {
    display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; align-items: flex-end;
}
.debut-card {
    width: 70px; height: 90px; background: #fff; border: 3px solid #2f3542; border-radius: 8px;
    position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center;
    box-shadow: 4px 4px 0 rgba(0,0,0,0.1); transition: transform 0.3s;
}
.debut-avatar { width: 30px; height: 30px; margin-bottom: 5px; border: 2px solid #eee; }
.debut-badge {
    position: absolute; top: -10px; left: -10px; width: 20px; height: 20px;
    background: #ff4757; color: #fff; border-radius: 50%;
    font-size: 8px; font-weight: bold; display: flex; align-items: center; justify-content: center;
    border: 2px solid #fff; z-index: 2;
}
/* TOP 1 */
.debut-card.rank-1 {
    width: 100px; height: 130px; border-color: #ffd700; background: linear-gradient(to bottom, #fff, #fff5c4);
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); z-index: 10; transform: scale(1.1);
}
.debut-card.rank-1 .debut-avatar { width: 50px; height: 50px; }
.debut-card.rank-1 .debut-badge { background: #ffd700; color: #2f3542; width: 25px; height: 25px; font-size: 12px; }
/* TOP 2 & 3 */
.debut-card.rank-2, .debut-card.rank-3 {
    width: 85px; height: 110px; border-color: #a4b0be; z-index: 5;
}
.debut-card.rank-3 { border-color: #cd7f32; }
.debut-card.rank-2 .debut-avatar, .debut-card.rank-3 .debut-avatar { width: 40px; height: 40px; }
.debut-card.rank-normal { opacity: 0.9; }

/* Notification */
.toast-visible { top: 30px !important; opacity: 1 !important; }
.toast-hidden { top: 0px !important; opacity: 0 !important; }

#draft-visual {
    position: relative;
    width: 95%;           /* Chiếm 95% chiều rộng cha */
    height: 70% !important;        /* CỐ ĐỊNH CHIỀU CAO (Quan trọng) */
    background: #fff9c4;  
    border: 4px solid #2f3542;
    border-radius: 12px;
    margin: 10px auto;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
    display: block;       /* Đảm bảo nó là block */
}

#draftCanvas {
    width: 100%;
    height: 100%;
    display: block;
}

/* Style cho thanh điểm Team */
.team-score-bar {
    display: flex;
    align-items: center;
    background: #333;
    height: 50px;
    border-radius: 8px;
    overflow: hidden;
    border: 2px solid #555;
    position: relative;
    opacity: 0; /* Ẩn lúc đầu để animation */
    transition: opacity 0.5s;
}

.team-score-bar.revealed {
    opacity: 1;
}

.ts-rank {
    width: 50px;
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    background: #444;
    height: 100%;
    display: flex; align-items: center; justify-content: center;
}

.ts-name {
    flex-grow: 1;
    padding-left: 15px;
    font-size: 10px;
    z-index: 2;
}

.ts-val {
    width: 120px;
    text-align: right;
    padding-right: 15px;
    font-weight: bold;
    font-size: 12px;
    color: #feca57;
    z-index: 2;
}

/* Thanh progress chạy nền */
.ts-fill {
    position: absolute;
    top: 0; left: 0;
    height: 100%;
    background: linear-gradient(90deg, rgba(255,255,255,0.1), rgba(255,255,255,0.3));
    width: 0%;
    transition: width 2s cubic-bezier(0.22, 1, 0.36, 1); /* Hiệu ứng chạy chậm dần */
    z-index: 1;
}

/* Highlight đội người chơi */
.team-score-bar.my-team {
    border-color: #feca57;
    box-shadow: 0 0 10px rgba(254, 202, 87, 0.3);
}
.team-score-bar.my-team .ts-rank { background: #feca57; color: #222; }

.result-box, #create-box {
    max-height: 80% !important;
    width: 90% !important;
    overflow-y: auto;
}

#rotate-device-overlay {
    display: none; /* Mặc định ẩn */
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #2f3542; z-index: 9999;
    flex-direction: column; align-items: center; justify-content: center;
    color: #fff;
}
.rotate-icon { font-size: 50px; margin-bottom: 20px; animation: spin 2s infinite linear; }

@keyframes spin { 100% { transform: rotate(360deg); } }

/* 1. Mặc định là để JS tự quyết định (không ép !important) */
#interaction-modal {
    display: none; /* Mặc định ẩn */
}

/* 2. Chỉ khi JS bật nó lên (thêm style="display: block"), ta mới ép nó thành flex */
#interaction-modal[style*="display: block"] {
    display: flex !important;
    flex-direction: column !important;
}

/* Chỉ hiện khi màn hình dọc trên mobile */
@media screen and (max-height: 500px) and (orientation: landscape) {
    #mobile-controls {
        display: none !important;  /* Mặc định ẩn */
    }

    #joystick-base {
        width: 120px;
        height: 120px;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        position: relative;
        backdrop-filter: blur(4px);
    }

    #joystick-stick {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        margin-top: -25px; margin-left: -25px; /* Căn giữa thủ công */
        pointer-events: none; /* Để cảm ứng xuyên qua núm vào đế */
    }
    /* 1. Thu nhỏ các nút bấm chính (Relations, Settings) */
    button {
        padding: 4px 8px !important;
        font-size: 8px !important;
        border-width: 2px !important;
        box-shadow: 2px 2px 0 #2f3542 !important;
        margin: 2px !important;
    }

    button[onclick="Game.showRelList()"] {
        width: 100px !important;
        top: 10px !important;
        left: 10px !important;
    }

    button[onclick="Game.toggleSettings()"] {
        width: 100px !important;
        top: 40px !important; /* Kéo lên sát nút trên */
        left: 10px !important;
    }

    /* 2. Thu nhỏ bảng chỉ số (Stats) bên phải */
    #hub-stats-display {
        top: 5px !important;
        right: 5px !important;
        padding: 5px 8px !important;
        font-size: 8px !important; /* Chữ siêu nhỏ */
        line-height: 1.4 !important;
        width: 110px !important; /* Cố định chiều rộng nhỏ */
        min-width: auto !important;
        border-width: 2px !important;
    }
    
    #hub-stats-display hr {
        margin: 2px 0 !important;
    }

    #create-box {
        width: 70% !important; /* Đừng để quá rộng */
        max-height: 95vh !important; /* Gần full chiều cao */
        padding: 10px !important;
        display: flex;
        flex-direction: row; /* Dàn ngang thay vì dọc để tiết kiệm chiều cao */
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
    }

    #create-box h1 {
        width: 100%;
        font-size: 12px !important;
        margin: 5px 0 !important;
        text-align: center;
    }

    .creation-cols {
        gap: 10px !important;
    }

    /* Thu nhỏ các dòng chỉ số cộng điểm */
    .stat-row {
        height: 24px !important;
        font-size: 8px !important;
        padding: 2px 5px !important;
    }
    
    .stat-controls button {
        width: 18px !important;
        height: 18px !important;
        font-size: 8px !important;
        padding: 0 !important;
    }

    /* Thu nhỏ ảnh nhân vật preview */
    #char-preview {
        width: 60px !important;
        height: 60px !important;
        border-width: 2px !important;
    }
    
    .color-label { font-size: 6px !important; margin-bottom: 2px !important; }
    
    #npc-intro-screen > div {
        width: 98% !important; 
        height: 98% !important;
        padding: 5px !important;
        display: flex !important;
        flex-direction: column !important;
    }

    #npc-intro-screen h2 {
        font-size: 14px !important; /* Tăng nhẹ tiêu đề 30 TRAINEES */
        margin: 5px 0 !important;
    }

    /* 2. Lưới hiển thị (Grid): Tăng kích thước cột để thẻ to hơn */
    #npc-list-grid {
        display: grid !important;
        /* Ép đúng 5 cột mỗi dòng */
        grid-template-columns: repeat(5, 1fr) !important; 
        gap: 5px !important;
        padding: 5px !important;
        overflow-y: auto !important; 
    }

    /* 2. Lưới hiển thị Ranking (image_c8f27d.png) */
    /* Giả sử id container của bảng xếp hạng là #ranking-grid hoặc tương đương */
    #ranking-list {
        display: grid !important;
        grid-template-columns: repeat(5, 1fr) !important; /* Hiện tại đang là 4, đổi thành 5 */
        gap: 5px !important;
        padding: 10px !important;
    }

    /* 3. Thẻ Nhân Vật (Rank Card): Phóng to layout */
    .rank-card {
        height: auto !important;
        min-height: 140px !important; /* Tăng từ 90px để chứa đủ text chỉ số */
        width: auto !important;
        padding: 6px !important;
        border-width: 2px !important; /* Viền dày hơn cho rõ pixel art */
        display: flex !important;
        flex-direction: column !important;
        justify-content: space-between !important;
    }

    /* Phóng to Avatar NPC */
    .rank-card > div:first-child { 
        width: 30px !important;  /* Tăng từ 15px */
        height: 30px !important; 
        margin: 5px auto !important;
    }
    /* Chỉnh lại tóc của nhân vật trong thẻ */
    .rank-card > div:first-child > div { height: 6px !important; }

    /* Phóng to Tên & Role */
    .rank-card div:nth-child(2) { 
        font-size: 10px !important; /* Tên NPC */
        margin: 3px 0 !important;
        font-weight: bold !important;
    } 
    .rank-card div:nth-child(3) { 
        font-size: 8px !important; /* Role: Vocal, Dance... */
        margin-bottom: 5px !important;
    }

    /* 4. Bảng chỉ số (Voc, Dan, Rap, Wis, Cha): Quan trọng nhất */
    .rank-card div:last-child {
        font-size: 8px !important; /* Tăng từ 5px lên 8px cho dễ đọc */
        padding: 4px !important;
        background: rgba(0,0,0,0.05) !important;
        border-radius: 4px !important;
        grid-template-columns: 1fr 1fr !important; 
        gap: 3px !important;
        line-height: 1.2 !important;
    }

    /* 5. Nút "ENTER DORM" */
    #npc-intro-screen button {
        padding: 8px 25px !important;
        font-size: 12px !important;
        margin: 5px 0 !important;
        align-self: center !important;
    }

    #minigame-screen h2 {
        display: none; 
    }
    
    #minigame-canvas-container {
        width: 90vw !important; /* Chiếm 90% chiều ngang màn hình */
        height: 90vh !important; /* Chiếm 90% chiều cao màn hình */
        max-width: 600px !important; /* Giới hạn lại chút để không bị dài ngoằng trên máy to */
        margin: 2vh auto !important; /* Căn giữa */
        border-width: 3px !important;
    }

    /* 2. Chỉnh lại giao diện Hướng dẫn (Tutorial) bên trong */
    #mg-tutorial {
        padding: 10px !important;
        justify-content: center !important;
    }

    /* Icon (Cánh tay, Micro...) - Cho to lên */
    #mg-tutorial > div:first-child { 
        font-size: 35px !important; 
        margin-bottom: 5px !important;
    }

    /* Tiêu đề (GYM TRAINING) */
    #mg-tutorial h2 {
        display: block !important;
        font-size: 14px !important; /* Tăng cỡ chữ tiêu đề */
        margin-bottom: 10px !important;
        color: #feca57 !important;
    }

    /* Hộp nội dung văn bản hướng dẫn */
    #mg-tutorial > div:nth-child(3) {
        font-size: 11px !important; /* Tăng từ 8px lên 11px cho dễ đọc */
        line-height: 1.6 !important; /* Giãn dòng ra cho thoáng */
        padding: 10px !important;
        margin-bottom: 10px !important;
        width: 95% !important;
        background: rgba(255,255,255,0.15) !important;
        border: 2px solid #fff !important;
        border-radius: 8px !important;
        text-align: left !important;
    }
    
    /* Khoảng cách các dòng chữ */
    #mg-tutorial p {
        margin: 5px 0 !important;
    }

    /* Nút "I'M READY" - Làm to, dễ bấm */
    #btn-tut-start {
        font-size: 12px !important;
        padding: 10px 30px !important;
        border-radius: 5px !important;
        border-bottom-width: 4px !important;
        background: #00b894 !important;
        color: #fff !important;
        cursor: pointer !important;
    }

    /* Thông tin phụ bên dưới (TRAINING: EASY) */
    #minigame-info {
        font-size: 10px !important;
        margin-top: 5px !important;
        color: #aaa !important;
    }
    
    /* Nút EXIT */
    #minigame-screen > button {
        padding: 5px 15px !important;
        font-size: 10px !important;
        margin-top: 5px !important;
    }

    /* 1. Khung bao ngoài (Màu vàng nhạt) */
    #rel-screen .result-box {
        width: 95% !important;
        height: 90% !important;
        padding: 5px !important;
        display: flex;
        flex-direction: column;
    }

    /* Tiêu đề "RELATIONSHIP CHART" */
    #rel-screen h2 {
        font-size: 10px !important;
        margin: 2px 0 5px 0 !important;
    }

    /* 2. Lưới hiển thị (Grid) */
    /* 1. Lưới hiển thị: Tăng kích thước cột và hàng */
    #rel-list-grid {
        display: grid !important;
        /* Tăng chiều rộng tối thiểu cột từ 60px lên 100px -> Thẻ to gấp đôi */
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)) !important;
        
        /* Tăng chiều cao hàng từ 80px lên 130px */
        grid-auto-rows: 130px !important;
        
        gap: 8px !important;
        padding: 5px !important;
        overflow-y: auto !important; /* Cho phép cuộn */
        flex-grow: 1 !important;
    }

    /* 2. Thẻ quan hệ: Căn chỉnh lại nội dung */
    .rel-card {
        height: 100% !important;
        width: 100% !important;
        padding: 5px !important;
        border-width: 2px !important;
        border-radius: 8px !important;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly !important; /* Chia đều khoảng cách */
        align-items: center;
    }

    /* 3. Avatar nhân vật (To hơn) */
    .rel-card > div:first-child {
        width: 30px !important;  /* Tăng từ 12px lên 30px */
        height: 30px !important;
        margin-bottom: 5px !important;
    }
    .rel-card > div:first-child > div { height: 6px !important; } /* Tóc dày hơn */

    /* 4. Tên nhân vật */
    .rel-card div:nth-child(2) {
        font-size: 10px !important; /* Tăng từ 6px lên 10px */
        margin-bottom: 2px !important;
        font-weight: bold !important;
    }

    /* 5. Điểm số (Màu đỏ) */
    .rel-score {
        font-size: 12px !important; /* Tăng từ 8px lên 12px */
        margin: 2px 0 !important;
    }

    /* 6. Trạng thái (ACQUAINTANCE...) */
    .rel-status {
        font-size: 7px !important; /* Tăng từ 4px lên 7px cho dễ đọc */
        padding: 4px 6px !important;
        border-radius: 4px !important;
        max-width: 95% !important;
    }

    /* 4. Nút CLOSE bên dưới */
    #rel-screen > button {
        padding: 4px 15px !important;
        font-size: 8px !important;
        margin-top: 5px !important;
        height: 25px !important;
        align-self: center !important;
    }

    button[onclick="Game.showRelList()"], 
    button[onclick="Game.toggleSettings()"] {
        width: 110px !important;   /* Độ rộng bằng nhau */
        height: 28px !important;   /* Chiều cao bằng nhau */
        
        font-size: 8px !important; /* Cỡ chữ nhỏ để vừa 1 dòng */
        padding: 0 5px !important; /* Padding 2 bên */
        
        /* Căn giữa chữ */
        display: flex !important;
        align-items: center !important; 
        justify-content: center !important;
        
        /* QUAN TRỌNG: Cấm xuống dòng */
        white-space: nowrap !important; 
        
        left: 10px !important;
        box-sizing: border-box !important;
    }

    /* Đặt vị trí nút Relations (Ở trên) */
    button[onclick="Game.showRelList()"] {
        top: 10px !important;
        /* Nếu chữ vẫn bị to, giảm font riêng nút này xuống xíu */
        /* font-size: 7px !important; */ 
    }

    /* Đặt vị trí nút Settings (Ở dưới) */
    button[onclick="Game.toggleSettings()"] {
        top: 45px !important; /* Cách nút trên khoảng 5-7px (10 + 28 + 7 = 45) */
    }

    #settings-overlay .result-box {
        width: 50% !important;  /* Chỉ chiếm 50% màn hình thay vì full */
        height: auto !important; /* Chiều cao tự co giãn theo nội dung */
        max-height: 90% !important;
        padding: 10px !important; /* Giảm padding */
        
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    /* 2. Tiêu đề "PAUSED" */
    #settings-overlay h1 {
        font-size: 16px !important; /* Giảm font chữ tiêu đề */
        margin: 5px 0 10px 0 !important;
    }

    /* 3. Label "AUDIO SETTINGS" */
    #settings-overlay label {
        font-size: 8px !important;
        margin-bottom: 2px !important;
    }

    /* 4. Các khung chứa nút bấm */
    #settings-overlay > .result-box > div {
        width: 100% !important;
        margin: 2px 0 !important;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* 5. Chỉnh lại các nút bấm (BGM, RESUME, QUIT) */
    #settings-overlay button {
        width: 70% !important; /* Nút gọn lại, không bè ra 2 bên */
        height: 25px !important; /* Chiều cao nút cố định nhỏ */
        padding: 0 !important;
        font-size: 8px !important;
        margin: 3px 0 !important; /* Khoảng cách giữa các nút */
        
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #interaction-modal {
        /* 1. Mở rộng chiều ngang để tận dụng 2 bên */
        width: 90% !important; 
        max-width: none !important; /* Bỏ giới hạn chiều rộng cũ */
        
        /* 2. Ép chiều cao và vị trí */
        height: auto !important;
        bottom: 10px !important; /* Sát mép dưới */
        top: auto !important;    /* Bỏ căn giữa dọc */
        
        /* 3. Giao diện bên trong */
        padding: 5px 10px !important;
        /* display: flex !important; */
        flex-direction: column !important;
        align-items: flex-start !important; /* Căn nội dung sang trái */
    }

    /* Tên nhân vật */
    #dialogue-npc-name {
        font-size: 10px !important;
        margin: 2px 0 !important;
        color: var(--primary) !important;
        text-align: left !important;
        width: 100%;
    }

    /* Nội dung lời thoại */
    #dialogue-text {
        font-size: 9px !important;
        line-height: 1.3 !important;
        margin: 0 0 5px 0 !important;
        text-align: left !important;
        width: 100%;
    }

    /* Khu vực các nút bấm */
    #dialogue-options {
        width: 100% !important;
        display: flex !important;
        flex-direction: row !important; /* QUAN TRỌNG: Xếp nút nằm ngang */
        gap: 5px !important;
        justify-content: space-between !important;
    }

    /* Các nút lựa chọn */
    #dialogue-options button {
        flex: 1 !important; /* Chia đều chiều rộng cho 3 nút */
        width: auto !important; /* Ghi đè style inline cũ */
        margin: 0 !important;
        padding: 6px 2px !important;
        font-size: 7px !important;
        
        /* Xử lý text trong nút */
        white-space: normal !important; /* Cho phép xuống dòng nếu chữ dài */
        line-height: 1.1 !important;
        display: flex;
        align-items: center;
        justify-content: center;
        height: auto !important;
        min-height: 25px !important;
    }

    #char-preview {
        width: 140px !important;  /* Tăng kích thước hiển thị */
        height: 140px !important;
        border-width: 3px !important;
        margin-bottom: 5px !important;
    }

    .color-label {
        font-size: 7px !important;
        margin-bottom: 2px !important;
    }

    /* Điều chỉnh lại layout Create Box để chứa đủ Preview to */
    #create-box {
        flex-direction: row !important;
        align-items: center !important;
        padding: 10px !important;
    }

    .color-picker-container {
        display: flex;
        align-items: center;
        width: 100%;
        gap: 5px;
        margin-bottom: 5px;
    }

    .color-picker-row {
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: nowrap !important;
        
        /* Cố định chiều rộng: 4 ô (25px) + 3 gap (5px) + 2 padding bên (5px) = 125px */
        width: 125px !important; 
        max-width: 125px !important;
        
        /* QUAN TRỌNG: Căn trái để ô đầu tiên không bị đẩy ra ngoài */
        justify-content: flex-start !important; 
        
        overflow-x: auto !important;
        overflow-y: hidden !important;
        
        gap: 5px !important;
        
        /* Đệm 2 đầu để ô đầu và ô cuối không dính lề */
        padding: 0 2px !important; 
        
        margin: 0 !important;
        
        /* Giữ layout cố định */
        box-sizing: border-box !important;
        scroll-behavior: smooth;
        
        scroll-snap-type: x mandatory; 
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    /* Thêm class này để xử lý trạng thái đang chọn */
    .color-btn.active {
        border: 2px solid #000 !important; /* Viền đen đậm */
        transform: scale(0.9); /* Thu nhỏ xíu để không làm vỡ khung */
    }

    /* Đảm bảo nút màu luôn cứng kích thước */
    .color-btn {
        width: 25px !important;
        height: 25px !important;
        min-width: 25px !important;
        flex-shrink: 0 !important;
        border: 1px solid #fff !important;
        border-radius: 2px !important;
        scroll-snap-align: start; 
        box-sizing: border-box !important; /* Quan trọng để viền không làm to nút */
    }

    /* Nút mũi tên điều hướng */
    .nav-arrow {
        background: #2f3542 !important;
        color: #fff !important;
        border: none !important;
        box-shadow: none !important;
        padding: 5px !important;
        width: 25px !important;
        height: 25px !important;
        display: flex !important;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 10px !important;
        flex-shrink: 0;
        border-radius: 4px;
    }

    .nav-arrow:active {
        transform: scale(0.9);
    }
    
    .color-section {
        width: 100% !important;
        margin-bottom: 5px !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
    }
    .picker-container {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        width: 200px !important; /* Độ rộng cố định cho 4 màu + 2 nút */
        margin: 0 auto !important;
        gap: 5px !important;
    }

    #ranking-list .rank-card {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;     /* Căn giữa các div con theo chiều ngang */
        justify-content: center !important;  /* Căn giữa các div con theo chiều dọc */
        text-align: center !important;
        padding: 5px !important;
        box-sizing: border-box !important;
    }

    #ranking-list .rank-card > div {
        width: 100% !important;             /* QUAN TRỌNG: Div con phải rộng 100% thì text-align mới có tác dụng */
        text-align: center !important;       /* Ép chữ bên trong div ra chính giữa */
        margin: 0 !important;                /* Xóa các margin mặc định có thể gây lệch */
    }

    #ranking-list .rank-card > div:first-child {
        font-size: 18px !important;    
        font-weight: bold !important;  
        color: #2f3542 !important;     
        margin-bottom: 4px !important;       /* Chỉ giữ lại margin dưới để tạo khoảng cách với tên */
        text-shadow: 1px 1px 0px #fff; 
        line-height: 1 !important;           /* Giúp căn giữa theo chiều dọc chuẩn hơn */
    }

    /* Thu nhỏ nhẹ tên NPC để cân bằng lại layout */
    #ranking-list .rank-card div:nth-child(2) {
        font-size: 10px !important;
        margin-bottom: 2px !important;
    }

    /* Điểm số (ví dụ: 9.3k) */
    #ranking-list .rank-card div:last-child {
        font-size: 11px !important;
        font-weight: bold !important;
        color: #e67e22 !important; /* Màu cam đặc trưng cho điểm số */
    }

    /* --- CẤU HÌNH LẠI MÀN HÌNH TEAM SELECTION (DRAFT) --- */

    /* 1. Ẩn luôn tiêu đề "TEAM SELECTION" vì trong khung đã có chữ "TEAM DRAFT" rồi */
    /* Việc này giúp tiết kiệm khoảng 30-40px chiều cao quý giá */
    #draft-title {
        display: none !important; 
    }

    /* 2. Mở rộng khung hình ảnh lên tối đa (85% màn hình) */
    #draft-visual {
        width: 98% !important;        /* Mở rộng bề ngang */
        height: 85vh !important;      /* Chiếm 85% chiều cao màn hình */
        margin: 5px auto !important;  /* Căn giữa gọn gàng */
        border-width: 3px !important;
        background: #dfe6e9 !important;
        
        /* Đảm bảo canvas bên trong không bị méo */
        display: flex !important;
        align-items: center;
        justify-content: center;
    }

    /* 3. Canvas ép full khung */
    #draftCanvas {
        width: 100% !important;
        height: 100% !important;
        display: block !important;
    }

    /* 4. Dòng trạng thái nhỏ gọn bên dưới */
    #draft-status {
        font-size: 8px !important;
        margin: 2px 0 !important;
        position: absolute;
        bottom: 5px;
        right: 10px;
        background: rgba(255,255,255,0.8);
        padding: 2px 5px;
        border-radius: 4px;
        z-index: 10;
    }

    /* 5. Nút START COMPETITION: Nổi bật ở góc hoặc dưới đáy */
    #btn-start-event {
        position: absolute !important;
        bottom: 10px !important; /* Đặt đè lên góc dưới của màn hình */
        left: 50% !important;
        transform: translateX(-50%) !important;
        z-index: 20 !important;
        
        padding: 10px 30px !important;
        font-size: 14px !important;
        background: #ff6b81 !important; 
        color: #fff !important;
        border: 2px solid #fff !important;
        box-shadow: 0 4px 0 #2f3542 !important;
    }

    #comp-screen {
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        width: 100% !important;
        height: 100% !important;
    }

    /* Khung chứa Canvas không bị tràn */
    #comp-canvas-wrapper {
        width: 85vw !important;
        height: 85vh !important;
        margin: 0 auto !important;
        border: 2px solid #fff !important;
        box-shadow: 0 0 10px rgba(0,0,0,0.5) !important;
    }

    /* 2. Giao diện Kết quả: Chia đôi màn hình (Trái/Phải) */
    .res-layout {
        display: flex !important;
        flex-direction: row !important; /* Xếp ngang */
        width: 95% !important;
        height: 80% !important;
        align-items: center !important;
        gap: 15px !important;
    }

    /* Bên Trái: Bảng Xếp Hạng */
    .res-left {
        flex: 2 !important; /* Chiếm 2/3 màn hình */
        height: 100% !important;
        overflow-y: auto !important;
        border: 2px solid #2f3542 !important;
        background: #fff !important;
        border-radius: 8px !important;
        padding: 5px !important;
    }

    /* Bên Phải: Điểm số & Nút bấm */
    .res-right {
        flex: 1 !important; /* Chiếm 1/3 màn hình */
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        height: 100% !important;
    }

    /* Tinh chỉnh nút bấm cho gọn */
    .res-btn {
        width: 100% !important;
        padding: 10px 0 !important;
        font-size: 10px !important;
        margin-top: 10px !important;
    }

    /* Thu nhỏ tiêu đề để không chiếm chỗ */
    #round-result-overlay h2, 
    #comp-result-overlay h1 {
        font-size: 14px !important;
        margin-bottom: 5px !important;
        margin-top: 0 !important;
    }

    /* Sửa lại cái khung chứa canvas bên trong */
    #comp-screen > div:first-of-type {
        width: 90% !important; 
        height: 80% !important; /* Thay vì 450px cố định, hãy dùng % */
        max-height: 500px; /* Giới hạn tối đa để không quá to */
        margin: 0 !important; /* Bỏ margin auto cũ */
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    #room-notification {
        position: fixed !important;      /* Luôn cố định theo màn hình, không theo Map */
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        
        width: 85% !important;           /* Chiếm 85% chiều ngang màn hình */
        max-width: 400px !important;
        height: auto !important;
        max-height: 90vh !important;     /* Không cao quá 90% màn hình */
        
        overflow-y: auto !important;     /* Cho phép cuộn nếu nội dung quá dài */
        z-index: 5000 !important;        /* Luôn nổi lên trên cùng */
        
        background: #fff !important;
        border: 4px solid #2f3542 !important;
        border-radius: 10px !important;
        padding: 15px !important;
        box-shadow: 0 0 0 1000px rgba(0,0,0,0.6) !important; /* Làm tối nền đằng sau */
    }

    /* Tinh chỉnh nút chọn file cho to dễ bấm */
    #stage-setup-area button {
        padding: 12px !important;
        margin-top: 5px !important;
        font-size: 10px !important;
    }

    #stage-detail-overlay {
        align-items: center !important;
        justify-content: center !important;
        padding: 0 !important;
        background: rgba(0,0,0,0.85) !important;
    }

    /* Tiêu đề STAGE CLEAR */
    #stage-detail-overlay h1 {
        position: absolute;
        top: 10px;
        font-size: 24px !important;
        margin: 0 !important;
        z-index: 10;
        width: 100%;
        text-align: center;
    }

    /* Khung chứa nội dung kết quả */
    #stage-detail-content {
        width: 85vw !important;
        height: 75vh !important;
        margin-top: 30px !important; /* Chừa chỗ cho tiêu đề */
        background: #fff !important;
        border: 4px solid #fff !important;
        border-radius: 12px !important;
        box-shadow: 0 0 20px rgba(255,255,255,0.2) !important;
        padding: 0 !important;
        overflow: hidden !important;
    }

    /* --- LAYOUT CHIA ĐÔI (Trái - Phải) --- */
    .stage-res-layout {
        display: flex !important;
        width: 100%;
        height: 100%;
        flex-direction: row !important; 
    }

    /* Cột Trái: Hạng (S, A, B) & Độ khó */
    .sr-left {
        flex: 1 !important;
        background: #f1f2f6;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-right: 2px dashed #ccc;
    }

    /* Cột Phải: Chi tiết điểm & Nút */
    .sr-right {
        flex: 1.5 !important; /* Rộng hơn chút để chứa bảng điểm */
        padding: 10px 20px !important;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Tinh chỉnh text trong cột trái */
    .grade-text { font-size: 60px !important; margin: 5px 0 !important; }
    .acc-text { font-size: 10px !important; }
    .diff-stars { font-size: 10px !important; margin-top: 5px !important; }

    /* Tinh chỉnh bảng điểm bên phải */
    .score-row {
        display: flex;
        justify-content: space-between;
        font-size: 10px !important;
        margin-bottom: 6px !important;
        border-bottom: 1px solid #eee;
        padding-bottom: 2px;
    }

    /* Tổng điểm to */
    .total-score-box {
        background: #feca57 !important;
        color: #fff !important;
        text-shadow: 1px 1px 0 #d35400;
        font-size: 18px !important;
        padding: 8px !important;
        text-align: center;
        border-radius: 6px;
        margin: 10px 0 !important;
    }

    /* Nút Continue */
    #btn-stage-continue {
        width: 100%;
        padding: 12px !important;
        background: #00b894 !important;
        color: #fff !important;
        border: none !important;
        border-radius: 4px;
        font-size: 12px !important;
        box-shadow: 0 4px 0 #006266;
    }
}

/* --- TĂNG KÍCH THƯỚC NÚT START GAME --- */
#title-screen button {
    font-size: 20px !important;       /* Chữ to hơn (gấp đôi bình thường) */
    padding: 20px 60px !important;    /* Nút dày và dài hơn */
    border-width: 4px !important;     /* Viền dày hơn */
    margin-top: 50px !important;      /* Cách xa tiêu đề một chút */
    box-shadow: 6px 6px 0 #000 !important; /* Bóng đổ đậm hơn */
    
    /* Hiệu ứng nhấp nháy nhẹ để mời gọi bấm */
    animation: pulse 1.5s infinite alternate;
}

@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.05); }
}

@media (min-width: 1024px) {
    #npc-list-grid {
        /* Tăng số lượng cột bằng cách giảm min-width của mỗi cột */
        grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); 
        
        /* Giảm khoảng cách giữa các thẻ xuống cực nhỏ */
        gap: 6px; 
        
        /* Căn giữa grid trong màn hình to */
        max-width: 900px;
        margin: 0 auto;
        max-height: 75vh; /* Tăng vùng nhìn thấy trên PC */
    }

    /* Thu nhỏ thẻ card trên PC */
    .rank-card {
        padding: 5px !important;      /* Giảm lề trong */
        min-height: auto !important;  /* Bỏ chiều cao tối thiểu cứng */
        font-size: 0.8em;             /* Giảm cỡ chữ */
    }

    /* Thu nhỏ avatar trên PC */
    .rank-card > div:first-child {
        width: 15px !important;       /* Avatar nhỏ lại */
        height: 15px !important;
    }
    
    /* Ẩn bớt thông tin rườm rà nếu cần, hoặc chỉnh font siêu nhỏ */
    .rank-card div {
        line-height: 1.2;
    }
}

